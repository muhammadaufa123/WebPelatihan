@startuml WebPelatihan_ERD_Simplified
!define ENTITY(x) class x << (E,#FFAAAA) >>
!define LOOKUP(x) class x << (L,#AAFFAA) >>
!define BRIDGE(x) class x << (B,#AAAAFF) >>

title WebPelatihan - LMS & Talent Scouting Platform (Simplified ERD)

' Core User Management
ENTITY(users) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == BASIC USER DATA ==
  name: VARCHAR NOT NULL
  email: VARCHAR UNIQUE NOT NULL
  password: VARCHAR NOT NULL
  avatar: VARCHAR NULLABLE
  pekerjaan: VARCHAR NULLABLE
  phone: VARCHAR NULLABLE
  location: VARCHAR NULLABLE
  == TALENT SCOUTING FIELDS ==
  available_for_scouting: BOOLEAN NOT NULL
  talent_skills: JSON NULLABLE
  monthly_salary_expectation: DECIMAL(10,2) NULLABLE
  hourly_rate: DECIMAL(8,2) NULLABLE
  talent_bio: TEXT NULLABLE
  portfolio_url: VARCHAR NULLABLE
  experience_level: ENUM NULLABLE
  is_active_talent: BOOLEAN NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

' LMS Core Entities
LOOKUP(categories) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == DATA FIELDS ==
  name: VARCHAR NOT NULL
  slug: VARCHAR NOT NULL
  icon: VARCHAR NOT NULL
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

LOOKUP(course_levels) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == DATA FIELDS ==
  name: VARCHAR NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

LOOKUP(course_modes) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == DATA FIELDS ==
  name: VARCHAR NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

ENTITY(trainers) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == DATA FIELDS ==
  is_active: BOOLEAN NOT NULL
  == FOREIGN KEYS ==
  user_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

ENTITY(courses) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == COURSE DATA ==
  name: VARCHAR NOT NULL
  slug: VARCHAR NOT NULL
  path_trailer: VARCHAR NOT NULL
  about: TEXT NOT NULL
  thumbnail: VARCHAR NOT NULL
  price: DECIMAL(10,2) NOT NULL
  is_free: BOOLEAN NOT NULL
  == FOREIGN KEYS ==
  category_id: BIGINT FK NOT NULL
  course_level_id: BIGINT FK NOT NULL
  course_mode_id: BIGINT FK NOT NULL
  trainer_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

ENTITY(course_modules) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == MODULE DATA ==
  name: VARCHAR NOT NULL
  order: INTEGER NOT NULL
  == FOREIGN KEYS ==
  course_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

ENTITY(course_videos) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == VIDEO DATA ==
  name: VARCHAR NOT NULL
  path_video: VARCHAR NOT NULL
  order: INTEGER NOT NULL
  == FOREIGN KEYS ==
  course_id: BIGINT FK NOT NULL
  course_module_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

ENTITY(course_materials) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == MATERIAL DATA ==
  name: VARCHAR NOT NULL
  file_path: VARCHAR NOT NULL
  file_type: VARCHAR(20) NOT NULL
  order: INTEGER NOT NULL
  == FOREIGN KEYS ==
  course_module_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

ENTITY(module_tasks) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == TASK DATA ==
  name: VARCHAR NOT NULL
  description: TEXT NULLABLE
  order: INTEGER NOT NULL
  deadline: TIMESTAMP NULLABLE
  == FOREIGN KEYS ==
  course_module_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

' Student Progress & Assessment
BRIDGE(course_trainees) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == FOREIGN KEYS ==
  user_id: BIGINT FK NOT NULL
  course_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

ENTITY(course_progresses) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == PROGRESS DATA ==
  completed_videos: JSON NOT NULL
  completed_materials: JSON NOT NULL
  completed_tasks: JSON NOT NULL
  progress: INTEGER NOT NULL
  quiz_passed: BOOLEAN NOT NULL
  == FOREIGN KEYS ==
  user_id: BIGINT FK NOT NULL
  course_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

ENTITY(task_submissions) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == SUBMISSION DATA ==
  file_path: VARCHAR NULLABLE
  answer: TEXT NULLABLE
  grade: INTEGER NULLABLE
  == FOREIGN KEYS ==
  module_task_id: BIGINT FK NOT NULL
  user_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

ENTITY(certificates) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == CERTIFICATE DATA ==
  path: VARCHAR NOT NULL
  generated_at: TIMESTAMP NOT NULL
  == FOREIGN KEYS ==
  user_id: BIGINT FK NOT NULL
  course_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

' Quiz System
ENTITY(final_quizzes) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == QUIZ DATA ==
  title: VARCHAR NOT NULL
  description: TEXT NULLABLE
  passing_score: INTEGER NOT NULL
  is_hidden_from_trainee: BOOLEAN NOT NULL
  == FOREIGN KEYS ==
  course_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

ENTITY(quiz_questions) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == QUESTION DATA ==
  question: TEXT NOT NULL
  == FOREIGN KEYS ==
  final_quiz_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

ENTITY(quiz_options) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == OPTION DATA ==
  option_text: VARCHAR NOT NULL
  is_correct: BOOLEAN NOT NULL
  == FOREIGN KEYS ==
  quiz_question_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

ENTITY(quiz_attempts) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == ATTEMPT DATA ==
  score: INTEGER NOT NULL
  is_passed: BOOLEAN NOT NULL
  == FOREIGN KEYS ==
  final_quiz_id: BIGINT FK NOT NULL
  user_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
}

' E-commerce
ENTITY(cart_items) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == CART DATA ==
  quantity: INTEGER NOT NULL
  == FOREIGN KEYS ==
  user_id: BIGINT FK NOT NULL
  course_id: BIGINT FK NOT NULL
  == SYSTEM FIELDS ==
  timestamps
  == CONSTRAINTS ==
  UNIQUE(user_id, course_id)
}

ENTITY(subscribe_transactions) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == TRANSACTION DATA ==
  total_amount: BIGINT NOT NULL
  is_paid: BOOLEAN NOT NULL
  subscription_start_date: DATE NULLABLE
  proof: VARCHAR NOT NULL
  == FOREIGN KEYS ==
  user_id: BIGINT FK NOT NULL
  course_id: BIGINT FK NULLABLE
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

' Talent Scouting System
ENTITY(talent_admins) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == FOREIGN KEYS ==
  user_id: BIGINT FK NOT NULL
  == DATA FIELDS ==
  is_active: BOOLEAN NOT NULL
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

ENTITY(talents) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == FOREIGN KEYS ==
  user_id: BIGINT FK NOT NULL
  == DATA FIELDS ==
  is_active: BOOLEAN NOT NULL
  scouting_metrics: JSON NULLABLE
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

ENTITY(recruiters) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == FOREIGN KEYS ==
  user_id: BIGINT FK NOT NULL
  == COMPANY DATA ==
  company_name: VARCHAR NULLABLE
  industry: VARCHAR NULLABLE
  company_size: VARCHAR NULLABLE
  website: VARCHAR NULLABLE
  company_description: TEXT NULLABLE
  phone: VARCHAR NULLABLE
  address: TEXT NULLABLE
  == DATA FIELDS ==
  is_active: BOOLEAN NOT NULL
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

ENTITY(talent_requests) {
  == PRIMARY KEY ==
  +id: BIGINT PK
  == FOREIGN KEYS ==
  recruiter_id: BIGINT FK NOT NULL
  talent_id: BIGINT FK NOT NULL
  talent_user_id: BIGINT FK NOT NULL
  == PROJECT DATA ==
  project_title: VARCHAR NOT NULL
  project_description: TEXT NOT NULL
  requirements: TEXT NULLABLE
  budget_range: VARCHAR NULLABLE
  project_duration: VARCHAR NULLABLE
  employment_type: ENUM(freelance,contract,full-time) NULLABLE
  salary_type: ENUM(hourly,monthly,project-based) NULLABLE
  == STATUS TRACKING ==
  status: ENUM(pending,approved,meeting_arranged,rejected,completed) NOT NULL
  talent_accepted: BOOLEAN NOT NULL
  admin_accepted: BOOLEAN NOT NULL
  both_parties_accepted: BOOLEAN NOT NULL
  == TIME BLOCKING ==
  project_start_date: DATETIME NULLABLE
  project_end_date: DATETIME NULLABLE
  is_blocking_talent: BOOLEAN NOT NULL
  == WORKFLOW TIMESTAMPS ==
  talent_accepted_at: TIMESTAMP NULLABLE
  admin_accepted_at: TIMESTAMP NULLABLE
  meeting_arranged_at: TIMESTAMP NULLABLE
  onboarded_at: TIMESTAMP NULLABLE
  workflow_completed_at: TIMESTAMP NULLABLE
  == SYSTEM FIELDS ==
  soft_deletes, timestamps
}

' ===== RELATIONSHIPS =====

' LMS Core Relationships
users ||--o{ trainers : "user_id"
categories ||--o{ courses : "category_id"
course_levels ||--o{ courses : "course_level_id"
course_modes ||--o{ courses : "course_mode_id"
trainers ||--o{ courses : "trainer_id"

' Course Structure
courses ||--o{ course_modules : "course_id"
courses ||--o{ course_videos : "course_id"
course_modules ||--o{ course_videos : "course_module_id"
course_modules ||--o{ course_materials : "course_module_id"
course_modules ||--o{ module_tasks : "course_module_id"

' Student Progress & Assessment
users ||--o{ course_trainees : "user_id"
courses ||--o{ course_trainees : "course_id"
users ||--o{ course_progresses : "user_id"
courses ||--o{ course_progresses : "course_id"
users ||--o{ task_submissions : "user_id"
module_tasks ||--o{ task_submissions : "module_task_id"
users ||--o{ certificates : "user_id"
courses ||--o{ certificates : "course_id"

' Quiz System
courses ||--o{ final_quizzes : "course_id"
final_quizzes ||--o{ quiz_questions : "final_quiz_id"
quiz_questions ||--o{ quiz_options : "quiz_question_id"
final_quizzes ||--o{ quiz_attempts : "final_quiz_id"
users ||--o{ quiz_attempts : "user_id"

' E-commerce
users ||--o{ cart_items : "user_id"
courses ||--o{ cart_items : "course_id"
users ||--o{ subscribe_transactions : "user_id"
courses ||--o{ subscribe_transactions : "course_id"

' Talent Scouting System
users ||--|| talent_admins : "user_id"
users ||--|| talents : "user_id"
users ||--|| recruiters : "user_id"
recruiters ||--o{ talent_requests : "recruiter_id"
talents ||--o{ talent_requests : "talent_id"
users ||--o{ talent_requests : "talent_user_id"

note right of users
  **Multi-Role User System**:
  Trainees → LMS Learning → Skills → Talent Conversion

  **Indonesian Employment Context**:
  • Monthly salary expectations for full-time roles
  • Hourly rates for freelance/project work
  • Mixed employment types support
  • Local currency (IDR) considerations

  **Key Features**:
  • Course completion tracking
  • Automatic skill generation
  • Talent scouting integration
  • Certificate management
end note

note bottom of talent_requests
  **Workflow**: pending → approved → meeting_arranged → completed
  **Dual Acceptance**: talent + admin approval required
  **Time Blocking**: prevents scheduling conflicts

  **Indonesian Employment Models**:
  • **Full-time**: Monthly salary negotiations
  • **Contract**: Project-based or monthly terms
  • **Freelance**: Hourly or project rates
  • **Flexible**: Mixed compensation structures
end note

@enduml
